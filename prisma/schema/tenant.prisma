model Tenant {
  id             String          @id @default(uuid())
  slug           String          @unique // URL da empresa (ex: app.sistema.com/slug)
  name           String // Nome de exibição
  isActive       Boolean         @default(true)
  clerkId        String?         @unique
  billingProfile BillingProfile?

  planId      String
  plan        Plan      @relation(fields: [planId], references: [id])
  trialEndsAt DateTime?
  logoUrl     String?

  users              User[]
  customers          Customer[]
  addressCategories  AddressCategory[]
  customerCategories CustomerCategory[]
  priceLists         PriceList[]
  subscriptions      Subscription[]
  attachments        Attachment[]
  products           Product[]
  taxProfiles        TaxProfile[]
  financialTitles    FinancialTitle[]
  financialMovements FinancialMovement[]

  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  StockMovement     StockMovement[]
  Order             Order[]
  Invite            Invite[]
  Warehouse         Warehouse[]
  Supplier          Supplier[]
  ProductSupplier   ProductSupplier[]
  StockTransfer     StockTransfer[]
  NfeInbox          NfeInbox[]
  TenantEmailConfig TenantEmailConfig?
  FinancialCategory FinancialCategory[]
  PaymentTerm       PaymentTerm[]
  PaymentMethod     PaymentMethod[]
  ProductPrice      ProductPrice[]
  CommissionRule    CommissionRule[]
  CommissionRecord  CommissionRecord[]
  CommissionPayout  CommissionPayout[]
  BankAccount       BankAccount[]

  @@map("tenants")
}

model TenantEmailConfig {
  id       String @id @default(uuid())
  tenantId String @unique
  tenant   Tenant @relation(fields: [tenantId], references: [id])

  host     String // ex: imap.gmail.com
  port     Int     @default(993)
  user     String // email
  password String // senha de app (criptografada idealmente)
  isActive Boolean @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("tenant_email_configs")
}
